<% @upload.files.each do |file| %>
	<div class="uploadContainer">
		<% if is_owner(@upload) %>
			<div class="removeContainer">
				<%= link_to 'Remove', delete_image_attachment_upload_url(file.id),
		            method: :delete,
		            data: { confirm: 'Are you sure you wish to delete this?' } %>
			</div>
		<% end %>
		<div class="fileContainer" title="Filename: <%= file.filename %>">
			<% if is_image(file) %>
				<div class="imageContainer original">
					<%= image_tag(file, alt: file.filename)  %>
					<div class="fileSize">
						Original: <%= bytes_to_megabytes(file.byte_size) %> MB
					</div>
					<div class="externalLink" title="Open source file">
						<%= link_to image_tag("external_link_icon.svg"), Rails.application.routes.url_helpers.rails_blob_path(file, only_path: true), target: :_blank %>
					</div>
				</div>
				<div class="imageContainer large" url="<%= Rails.application.routes.url_helpers.rails_representation_url(file.variant(resize: '600x600'), Rails.application.config.action_mailer.default_url_options) %>">
					<%= image_tag file.variant(resize: "600x600") %>
					<div class="fileSize" title="Image has been resized to a maximum width and/or height of 600px">
						600px
					</div>
					<div class="externalLink" title="Open source file">
						<%= link_to image_tag("external_link_icon.svg"), Rails.application.routes.url_helpers.rails_representation_url(file.variant(resize: "600x600"), Rails.application.config.action_mailer.default_url_options), target: :_blank %>
					</div>
				</div>
				<div class="imageContainer medium" url="<%= Rails.application.routes.url_helpers.rails_representation_url(file.variant(resize: '300x300'), Rails.application.config.action_mailer.default_url_options) %>">
					<%= image_tag file.variant(resize: "300x300") %>
					<div class="fileSize" title="Image has been resized to a maximum width and/or height of 300px">
						300px
					</div>
					<div class="externalLink" title="Open source file">
						<%= link_to image_tag("external_link_icon.svg"), Rails.application.routes.url_helpers.rails_representation_url(file.variant(resize: "300x300"), Rails.application.config.action_mailer.default_url_options), target: :_blank %>
					</div>
				</div>
				<div class="imageContainer small" url="<%= Rails.application.routes.url_helpers.rails_representation_url(file.variant(resize: '200x200'), Rails.application.config.action_mailer.default_url_options) %>">
					<%= image_tag file.variant(resize: "200x200") %>
					<div class="fileSize" title="Image has been resized to a maximum width and/or height of 200px">
						200px
					</div>
					<div class="externalLink" title="Open source file">
						<%= link_to image_tag("external_link_icon.svg"), Rails.application.routes.url_helpers.rails_representation_url(file.variant(resize: "200x200"), Rails.application.config.action_mailer.default_url_options), target: :_blank %>
					</div>
				</div>
			<% elsif is_video(file) %>
				<div class="videoContainer">
					<%= video_tag rails_blob_path(file), controls: true %>
				</div>
			<% elsif is_pdf(file) %>
				<div class="pdfContainer">
					<%= image_tag("pdf_icon.svg") %>
				</div>
			<% end %>
		</div>
		<div class="uploadDetailsContainer">
			<div>
				Uploaded by: <%= @uploaded_by %>
			</div>
			<div>
				Uploaded on: <%=formatted_date(@upload.created_at)%>
			</div>
			<div>
				Tags: <%= raw @upload.tags.map(&:name).map { |t| link_to t, uploads_path(tag: t) }.join(', ') %>
			</div>
			<% if is_image(file) %>
				<div class="copyEventUrl">
					Copy Event URL
				</div>
				<div class="copyMessage">
				</div>
			<% end %>
		</div>
	</div>
<% end %>